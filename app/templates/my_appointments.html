<!DOCTYPE html>
<html>
<head>
    <title>My Appointments - TeleHealth Connect</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { border: 1px solid #ccc; padding: 10px; text-align: left; }
        th { background-color: #f2f2f2; }
        a.button { padding: 5px 10px; background-color: #007bff; color: white; text-decoration: none; border-radius: 4px; }
        a.button:hover { background-color: #0056b3; }

        /* Flash message styles */
        .flash-message { padding: 10px; margin-bottom: 20px; border-radius: 5px; opacity: 1; transition: opacity 1s ease-out; }
        .flash-success { background-color: #d4edda; color: #155724; }
        .flash-danger { background-color: #f8d7da; color: #721c24; }
        .flash-info { background-color: #cce5ff; color: #004085; }
    </style>
</head>
<body>
    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash-message flash-{{ category }}">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <h1>{{ current_user.name }}'s Appointments</h1>
    <p><a href="{{ url_for('patient.dashboard') }}">Back to Dashboard</a></p>

    {% if appointments %}
        <table>
            <tr>
                <th>Doctor</th>
                <th>Specialty</th>
                <th>Date & Time</th>
                <th>Notes</th>
            </tr>
            {% for appt in appointments %}
            <tr>
                <td>{{ appt.doctor.name }}</td>
                <td>{{ appt.doctor.specialty }}</td>
                <td>{{ appt.date.strftime('%Y-%m-%d %H:%M') }}</td>
                <td>{{ appt.notes or 'N/A' }}</td>
            </tr>
            {% endfor %}
        </table>
    {% else %}
        <p>You have no appointments booked yet.</p>
    {% endif %}

    <script>
        // Auto-hide flash messages after 4 seconds
        window.addEventListener('DOMContentLoaded', () => {
            const flashes = document.querySelectorAll('.flash-message');
            flashes.forEach(flash => {
                setTimeout(() => {
                    flash.style.opacity = '0';
                    setTimeout(() => flash.remove(), 1000);
                }, 4000);
            });
        });
    </script>
</body>
</html>
